"use strict";var BehaviourLogger={userId:null,defaultEvents:["click","scroll","wheel","mousewheel","resize","focus","focusin","focusout","blur","mousemove","keyup","submit"],init:function(e){Logger.init(),EventLogger.init(e||this.defaultEvents),this.userId=Math.floor(9999999*Math.random()),console.log("BehaviourLogger ready!"),Logger.log("User id: "+this.userId+", timestamp: "+Date.now())}},EventHandler={bind:function(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):window.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},unbind:function(e,t,n){window.removeEventListener?e.removeEventListener(t,n,!1):window.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},stop:function(e){var t=e||window.event;t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}},EventLogger={events:[],handlers:{},unicodeRegex:/^U\+[0-9a-fA-F]+$/,supported:{click:{auto:!0},scroll:{throttle:!0,wait:1e3},wheel:{throttle:!0,wait:1e3},mousewheel:{throttle:!0,wait:1e3},resize:{throttle:!0,wait:1e3},focus:{auto:!0},focusin:{auto:!0},focusout:{auto:!0},blur:{auto:!0},mousemove:{throttle:!0,wait:1e3},keyup:{throttle:!0,wait:1e3},submit:{auto:!0}},init:function(e){for(var t,n=0;n<e.length;n++)this.supported[e[n]]&&(t=this.getHandler(e[n]),this.supported[e[n]].auto||this.supported[e[n]].throttle&&(t=Util.throttle(t,this.supported[e[n]].wait)),EventHandler.bind(window,e[n],t));console.log("EventLogger ready!")},getHandler:function(){return function(e){console.log(e);var t,n=EventLogger.getEventData(e);"mousemove"===e.type?(t=Util.getMousePositionFromEvent(e),n.x=t[0],n.y=t[1]):"resize"===e.type&&(n.clientWidth=document.documentElement.clientWidth,n.clientHeight=document.documentElement.clientHeight),Logger.log(JSON.stringify(n))}},getEventData:function(e){var t=["type","keyCode","keyIdentifier"],n={target:this.getTargetData(e.target)};return n.timestamp=Date.now(),this.extractProperties(e,n,t),"keyup"!==e.type||n.keyIdentifier&&!this.unicodeRegex.test(n.keyIdentifier)||(n.keyIdentifier=Util.getReadableKeyId(e)),n},getTargetData:function(e){var t=["id","name","className","value"],n={tagName:e.tagName?e.tagName.toLowerCase():"html"};return this.extractProperties(e,n,t),e.form&&(n.form=this.getTargetData(e.form)),n},extractProperties:function(e,t,n){for(var o=0;o<n.length;o++)e[n[o]]&&(t[n[o]]=e[n[o]])}},Logger={el:null,textProperty:null,init:function(){this.el=document.getElementById("logger"),this.textProperty=this.el.innerText?"innerText":"textContent",console.log("Logger ready!")},log:function(e){this.el[this.textProperty]+=e+"\n"}},Watchmen={init:function(e){BehaviourLogger.init(e)},logCustomEvent:function(e){e.isCustom=!0,Logger.log(JSON.stringify(e))}};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=r)return-1;for(n=Math.max(i>=0?i:r-Math.abs(i),0);r>n;){if(n in o&&o[n]===e)return n;n++}return-1}),function(){function e(e){var t="focus"===e.type?"focusin":"focusout",n=new CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function t(n){n.c1Generated||(o.removeEventListener("focus",e,!0),o.removeEventListener("blur",e,!0),o.removeEventListener("focusin",t,!0),o.removeEventListener("focusout",t,!0)),setTimeout(function(){o.removeEventListener("focusin",t,!0),o.removeEventListener("focusout",t,!0)})}var n=window,o=n.document;"undefined"==typeof n.onfocusin&&(o.addEventListener("focus",e,!0),o.addEventListener("blur",e,!0),o.addEventListener("focusin",t,!0),o.addEventListener("focusout",t,!0))}();var Util={throttle:function(e,t,n){var o,r,i,a=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:Date.now(),a=null,i=e.apply(o,r),a||(o=r=null)};return function(){var s=Date.now();u||n.leading!==!1||(u=s);var c=t-(s-u);return o=this,r=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),u=s,i=e.apply(o,r),a||(o=r=null)):a||n.trailing===!1||(a=setTimeout(l,c)),i}},getMousePositionFromEvent:function(e){var t,n,o;return e=e||window.event,null===e.pageX&&null!==e.clientX&&(t=e.target&&e.target.ownerDocument||document,n=t.documentElement,o=t.body,e.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),[e.pageX,e.pageY]},getReadableKeyId:function(e){var t,n,o=e.keyCode,r=e.shiftKey?!0:!1;return n={8:"BACK_SPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSE_BREAK",20:"CAPS_LOCK",27:"ESCAPE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"EQUALS_SIGN",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"LEFT_WINDOW_KEY",92:"RIGHT_WINDOW_KEY",93:"SELECT_KEY",96:"NUMPAD_0",97:"NUMPAD_1",98:"NUMPAD_2",99:"NUMPAD_3",100:"NUMPAD_4",101:"NUMPAD_5",102:"NUMPAD_6",103:"NUMPAD_7",104:"NUMPAD_8",105:"NUMPAD_9",106:"MULTIPLY",107:"ADD",109:"SUBTRACT",110:"DECIMAL_POINT",111:"DIVIDE",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUM_LOCK",145:"SCROLL_LOCK",173:"HYPHEN",186:"SEMI_COLON",187:"EQUAL_SIGN",188:"COMMA",189:"DASH",190:"PERIOD",191:"FORWARD_SLASH",192:"BACK_TICK",219:"OPEN_SQUARE_BRACKET",221:"CLOSE_SQUARE_BRACKET",222:"SINGLE_QUOTE",224:"COMMAND"},t=192===o&&r===!0?"TILDA":49===o&&r===!0?"EXCLAMATION_POINT":50===o&&r===!0?"AT_SIGN":51===o&&r===!0?"HASHTAG":52===o&&r===!0?"DOLLAR_SIGN":53===o&&r===!0?"PERCENT":54===o&&r===!0?"CARET":55===o&&r===!0?"AMPERSAND":56===o&&r===!0?"ASTERISK":57===o&&r===!0?"OPEN_BRACKET":58===o&&r===!0?"CLOSE_BRACKET":173===o&&r===!0?"UNDERSCORE":61===o&&r===!0?"PLUS_SIGN":n[o]}};