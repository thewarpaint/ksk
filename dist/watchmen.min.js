!function(e,t,n){"use strict";var o={userId:null,defaultEvents:["click","scroll","wheel","mousewheel","resize","focus","focusin","focusout","blur","mousemove","keyup","submit"],init:function(t){var n;a.init(),r.init(t||this.defaultEvents),this.userId=Math.floor(9999999*Math.random()),console.log("BehaviourLogger ready!"),n={type:"init",userId:this.userId,timestamp:Date.now(),userAgent:e.navigator.userAgent},a.log(n)},teardown:function(){r.teardown()}},i={bind:function(t,n,o){e.addEventListener?t.addEventListener(n,o,!1):e.attachEvent?t.attachEvent("on"+n,o):t["on"+n]=o},unbind:function(t,n,o){e.removeEventListener?t.removeEventListener(n,o,!1):e.detachEvent?t.detachEvent("on"+n,o):t["on"+n]=null},stop:function(t){var n=t||e.event;n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}},r={handlers:[],unicodeRegex:/^U\+[0-9a-fA-F]+$/,supported:{click:{auto:!0},scroll:{throttle:!0,wait:1e3},wheel:{throttle:!0,wait:1e3},mousewheel:{throttle:!0,wait:1e3},resize:{throttle:!0,wait:1e3},focus:{auto:!0},focusin:{auto:!0},focusout:{auto:!0},blur:{auto:!0},mousemove:{throttle:!0,wait:1e3},keyup:{throttle:!0,wait:1e3},submit:{auto:!0}},init:function(t){for(var n,o=0;o<t.length;o++)this.supported[t[o]]&&(n=this.eventHandler,this.supported[t[o]].auto||this.supported[t[o]].throttle&&(n=l.throttle(n,this.supported[t[o]].wait)),i.bind(e,t[o],n),this.handlers.push({eventName:t[o],handler:n}));console.log("EventLogger ready!")},teardown:function(){for(var t=0;t<this.handlers.length;t++)i.unbind(e,this.handlers[t].eventName,this.handlers[t].handler)},eventHandler:function(e){var n,i=r.getEventData(e);"mousemove"===e.type?(n=l.getMousePositionFromEvent(e),i.x=n[0],i.y=n[1]):"resize"===e.type&&(i.clientWidth=t.documentElement.clientWidth,i.clientHeight=t.documentElement.clientHeight),i.userId=o.userId,a.log(i)},getEventData:function(e){var t=["type","keyCode","keyIdentifier"],n={target:this.getTargetData(e.target)};return n.timestamp=Date.now(),this.extractProperties(e,n,t),"keyup"!==e.type||n.keyIdentifier&&!this.unicodeRegex.test(n.keyIdentifier)||(n.keyIdentifier=l.getReadableKeyId(e)),n},getTargetData:function(e){var t=["id","name","className","value","checked","method","action"],n={tagName:e.tagName?e.tagName.toLowerCase():"html"};return this.extractProperties(e,n,t),e.form&&(n.form=this.getTargetData(e.form)),n},extractProperties:function(e,t,n){for(var o=0;o<n.length;o++)e[n[o]]&&(t[n[o]]=e[n[o]])}},a={socket:null,init:function(){this.socket=io("http://localhost:3000/"),console.log("Logger ready!")},log:function(e){u.log(e),this.socket.emit("logEvent",e)}},u={el:null,textProperty:null,init:function(e){this.el=t.getElementById(e),this.textProperty=this.el.innerText?"innerText":"textContent",console.log("UILogger ready!")},log:function(e){this.el&&(this.el[this.textProperty]+=JSON.stringify(e)+"\n\n")}},s={init:function(e){o.init(e)},teardown:function(){o.teardown()},logCustomEvent:function(e){e.isCustom=!0,a.log(e)},enableDebug:function(e){u.init(e)}};e.Watchmen=s,Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),i=o.length>>>0;if(0===i)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),r>=i)return-1;for(n=Math.max(r>=0?r:i-Math.abs(r),0);i>n;){if(n in o&&o[n]===e)return n;n++}return-1}),function(){function t(e){var t="focus"===e.type?"focusin":"focusout",n=new CustomEvent(t,{bubbles:!0,cancelable:!1});n.c1Generated=!0,e.target.dispatchEvent(n)}function n(e){e.c1Generated||(i.removeEventListener("focus",t,!0),i.removeEventListener("blur",t,!0),i.removeEventListener("focusin",n,!0),i.removeEventListener("focusout",n,!0)),setTimeout(function(){i.removeEventListener("focusin",n,!0),i.removeEventListener("focusout",n,!0)})}var o=e,i=o.document;"undefined"==typeof o.onfocusin&&(i.addEventListener("focus",t,!0),i.addEventListener("blur",t,!0),i.addEventListener("focusin",n,!0),i.addEventListener("focusout",n,!0))}();var l={throttle:function(e,t,n){var o,i,r,a=null,u=0;n||(n={});var s=function(){u=n.leading===!1?0:Date.now(),a=null,r=e.apply(o,i),a||(o=i=null)};return function(){var l=Date.now();u||n.leading!==!1||(u=l);var c=t-(l-u);return o=this,i=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),u=l,r=e.apply(o,i),a||(o=i=null)):a||n.trailing===!1||(a=setTimeout(s,c)),r}},getMousePositionFromEvent:function(n){var o,i,r;return n=n||e.event,null===n.pageX&&null!==n.clientX&&(o=n.target&&n.target.ownerDocument||t,i=o.documentElement,r=o.body,n.pageX=n.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=n.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),[n.pageX,n.pageY]},getReadableKeyId:function(e){var t,n,o=e.keyCode,i=e.shiftKey?!0:!1;return n={8:"BACK_SPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSE_BREAK",20:"CAPS_LOCK",27:"ESCAPE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"EQUALS_SIGN",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"LEFT_WINDOW_KEY",92:"RIGHT_WINDOW_KEY",93:"SELECT_KEY",96:"NUMPAD_0",97:"NUMPAD_1",98:"NUMPAD_2",99:"NUMPAD_3",100:"NUMPAD_4",101:"NUMPAD_5",102:"NUMPAD_6",103:"NUMPAD_7",104:"NUMPAD_8",105:"NUMPAD_9",106:"MULTIPLY",107:"ADD",109:"SUBTRACT",110:"DECIMAL_POINT",111:"DIVIDE",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUM_LOCK",145:"SCROLL_LOCK",173:"HYPHEN",186:"SEMI_COLON",187:"EQUAL_SIGN",188:"COMMA",189:"DASH",190:"PERIOD",191:"FORWARD_SLASH",192:"BACK_TICK",219:"OPEN_SQUARE_BRACKET",221:"CLOSE_SQUARE_BRACKET",222:"SINGLE_QUOTE",224:"COMMAND"},t=192===o&&i===!0?"TILDA":49===o&&i===!0?"EXCLAMATION_POINT":50===o&&i===!0?"AT_SIGN":51===o&&i===!0?"HASHTAG":52===o&&i===!0?"DOLLAR_SIGN":53===o&&i===!0?"PERCENT":54===o&&i===!0?"CARET":55===o&&i===!0?"AMPERSAND":56===o&&i===!0?"ASTERISK":57===o&&i===!0?"OPEN_BRACKET":58===o&&i===!0?"CLOSE_BRACKET":173===o&&i===!0?"UNDERSCORE":61===o&&i===!0?"PLUS_SIGN":n[o]}}}(window,document);